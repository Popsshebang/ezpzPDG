<!DOCTYPE html>
<html>
<head>
  <title>JavaScript I/O Examples</title>
  <meta charset="utf-8">
  <script src='lib/FileSaver.js' type='text/javascript'></script>

<style type='text/css'>

  body {
    width: 500px;
    margin: 25px auto;
    font-family: sans-serif;
  }

  button, input, textarea {
    font-size: 14pt;
  }

  #content {
    width: 100%;
    height: 400px;
  }

  #controls {
    margin-bottom: 25px;
  }

  .invis {
    position: absolute;
    top: -1000px;
    left: -1000px;
    opacity: 0;
  }

  .flr {
    float: right;
  }

</style>
<script type='text/javascript'>

  function elem(id) {
    return document.getElementById(id);
  }

  function load_aux() {
    elem('load-file').click();
  }

  function load() {
    var file = elem('load-file').files[0];
    var reader = new FileReader();
    reader.onload = function(e) {
      elem('content').value = reader.result;
    }
    reader.readAsText(file);
  }

  function save() {
    var text = elem('content').value;
    var fname = elem('save-name').value;
    var blob  = new Blob([text], {type: 'text/plain;charset=utf-8'});
    saveAs(blob, fname);
  }

</script>
</head>
<body>
  <h1>JavaScript I/O Examples</h1>

  <div id='controls'>
    <input id='load-file' type='file' class='invis'
      onchange='load()' />
    <button onclick='load_aux()'>Load</button>

    <div class='flr'>
      <input id='save-name' />
      <button onclick='save()'>Save</button>
    </div>
  </div>

  <div id='file-content'>
    <textarea id='content'></textarea>
  </div>

  <p>
    <a href='http://validator.w3.org/check/referer'>
      <img src='https://www.w3.org/Icons/valid-html401'
            alt='Valid HTML' height='31' width='88' />
    </a>
  </p>

</body>
</html>
